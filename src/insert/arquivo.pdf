CREATE EXTENSION IF NOT EXISTS "pgcrypto";

CREATE TABLE inspetores (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
	nome VARCHAR(50) NOT NULL,
	email VARCHAR(50) UNIQUE NOT NULL,
	telefone VARCHAR(50) NOT NULL
);

CREATE TABLE estoque (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
	nome VARCHAR(50) NOT NULL,
	quantidade INTEGER NOT NULL,
	fabricante VARCHAR(50) NOT NULL,
	tipo VARCHAR(50) NOT NULL
);

CREATE TABLE producao (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    nchassi VARCHAR(50) UNIQUE NOT NULL,
    modelo VARCHAR(50) NOT NULL,
    motor_id UUID NOT NULL,
    chassi_id UUID NOT NULL,
    kitPneu_id UUID NOT NULL,
    status VARCHAR(50) NOT NULL,
    data_fabricacao TIMESTAMP NOT NULL,
    inspetores_id UUID NULL,
	FOREIGN KEY (motor_id) REFERENCES estoque(id) ON DELETE CASCADE,
	FOREIGN KEY (chassi_id) REFERENCES estoque(id) ON DELETE CASCADE,
	FOREIGN KEY (kitPneu_id) REFERENCES estoque(id) ON DELETE CASCADE,
	FOREIGN KEY (inspetores_id) REFERENCES inspetores(id) ON DELETE CASCADE
);

CREATE TABLE entradaproduto (
    id UUID PRIMARY KEY,
	numero_nota INTEGER NOT NULL,
	quantidade INTEGER NOT NULL,
	estoque_id UUID NOT NULL
    FOREIGN KEY (estoque_id) REFERENCES estoque(id) ON DELETE CASCADE,
);


-- Inserindo motores
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Motor Ford Duratorq TDCi', 100, 'Ford', 'Motor');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Motor Cummins ISF 2.8 Diesel', 50, 'Cummins', 'Motor');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Motor Honda L15B7', 75, 'Honda', 'Motor');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Motor Volkswagen EA888', 80, 'Volkswagen', 'Motor');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Motor Toyota 2ZR-FE', 90, 'Toyota', 'Motor');

-- Inserindo kits de pneus
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Kit 5 Pneu Pirelli', 200, 'Pirelli', 'Pneu');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Kit 5 Pneu Bridgestone', 180, 'Bridgestone', 'Pneu');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Kit 5 Pneu Continental', 150, 'Continental', 'Pneu');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Kit 5 Pneu Michelin', 220, 'Michelin', 'Pneu');

-- Inserindo fabricantes de ve√≠culos
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Tesla', 50, 'Tesla', 'carcaca');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('BMW', 60, 'BMW', 'carcaca');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Volvo', 40, 'Volvo', 'carcaca');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Jeep', 70, 'Jeep', 'carcaca');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Chevrolet', 80, 'Chevrolet', 'carcaca');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Toyota', 90, 'Toyota', 'carcaca');
INSERT INTO estoque (nome, quantidade, fabricante, tipo) VALUES ('Mercedes-Benz', 55, 'Mercedes-Benz', 'carcaca');

